specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: PotFactory
    network: {{ network }}
    source:
      address: "{{ address }}"
      abi: PotFactory
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AdminChanged
        - BeraFeeChanged
        - PassesAddressChanged
        - DefaultFundraisingPeriodChanged
        - DefaultLockingPeriodChanged
        - ManagerExitFeeChanged
        - MaxCapacityPerPotChanged
        - MaxPerformanceFeeChanged
        - MaximumSupportedAssetCountChanged
        - MinInvestmentAmountChanged
        - OwnershipTransferred
        - Paused
        - FlexiblePotCreated
        - NonFlexiblePotCreated
        - PotImplementationChanged
        - ProtocolExitFeeChanged
        - TokenAdded
        - TokenRemoved
        - TreasuryChanged
        - Unpaused
        - UsdTokenChanged
      abis:
        - name: PotFactory
          file: ./abis/PotFactory.json
      eventHandlers:
        - event: AdminChanged(indexed address)
          handler: handleAdminChanged
        - event: BeraFeeChanged(uint256)
          handler: handleBeraFeeChanged
        - event: PassesAddressChanged(indexed address)
          handler: handlePassesAddressChanged
        - event: DefaultFundraisingPeriodChanged(uint256)
          handler: handleDefaultFundraisingPeriodChanged
        - event: DefaultLockingPeriodChanged(uint256)
          handler: handleDefaultLockingPeriodChanged
        - event: ManagerExitFeeChanged(uint256,uint256)
          handler: handleManagerExitFeeChanged
        - event: MaxCapacityPerPotChanged(uint256)
          handler: handleMaxCapacityPerPotChanged
        - event: MaxPerformanceFeeChanged(uint256)
          handler: handleMaxPerformanceFeeChanged
        - event: MaximumSupportedAssetCountChanged(uint256)
          handler: handleMaximumSupportedAssetCountChanged
        - event: MinInvestmentAmountChanged(uint256)
          handler: handleMinInvestmentAmountChanged
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: Paused(address)
          handler: handlePaused
        - event: FlexiblePotCreated(indexed address,indexed address,uint256,uint256,uint256,indexed
            address,uint256,uint256,uint256,uint8,uint32)
          handler: handleFlexiblePotCreated
        - event: NonFlexiblePotCreated(indexed address,indexed address,uint256,uint256,indexed
            address,uint256,uint256,uint256,uint8,uint32)
          handler: handleNonFlexiblePotCreated
        - event: PotImplementationChanged(uint8,indexed address,uint32)
          handler: handlePotImplementationChanged
        - event: ProtocolExitFeeChanged(uint256,uint256)
          handler: handleProtocolExitFeeChanged
        - event: TokenAdded(address,uint16)
          handler: handleTokenAdded
        - event: TokenRemoved(address)
          handler: handleTokenRemoved
        - event: TreasuryChanged(indexed address)
          handler: handleTreasuryChanged
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: UsdTokenChanged(indexed address)
          handler: handleUsdTokenChanged
        - event: PotUpgraded(address,uint32)
          handler: handlePotUpgraded
      file: ./src/pot-factory.ts
  - kind: ethereum
    name: Governance
    network: {{ network }}
    source:
      address: "{{ governance }}"
      abi: Governance
      startBlock: {{ startBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AssetGuardSet
        - AssetTypeSet
        - ContractGuardSet
        - Initialized
        - OwnershipTransferred
      abis:
        - name: Governance
          file: ./abis/Governance.json
      eventHandlers:
        - event: AssetGuardSet(uint16,address)
          handler: handleAssetGuardSet
        - event: ContractGuardSet(address,address)
          handler: handleContractGuardSet
      file: ./src/governance.ts
templates:
  - kind: ethereum
    name: FlexiblePot
    network: {{network}}
    source:
      abi: FlexiblePot
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Approval
        - AssetAdded
        - AssetRemoved
        - Canceled
        - Claimed
        - Deposited
        - Executed
        - FundraisingClosed
        - PotInitialized
        - Transfer
        - Withdrawn
      abis:
        - name: FlexiblePot
          file: ./abis/FlexiblePot.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: AssetAdded(indexed address,address)
          handler: handleAssetAdded
        - event: AssetRemoved(address,address)
          handler: handleAssetRemoved
        - event: Canceled(indexed address,uint256,uint256)
          handler: handleCanceled
        - event: Claimed(indexed address,indexed address,uint256,address,uint256)
          handler: handleClaimed
        - event: Deposited(indexed address,indexed address,address,uint256,uint256)
          handler: handleDeposited
        - event: Executed(indexed address,address,uint16)
          handler: handleExecuted
          receipt: true
        - event: FundraisingClosed(indexed address,uint256,uint256,uint256,uint256)
          handler: handleFundraisingClosed
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Withdrawn(indexed address,uint256,indexed
            address,uint256,(address,uint256)[],uint256,uint256,uint256)
          handler: handleWithdrawn
        - event: PlatformFeeCollected(indexed address,address,uint256)
          handler: handlePlatformFeeCollected
      file: ./src/flexible-pot.ts
  - kind: ethereum
    name: NonFlexiblePot
    network: {{network}}
    source:
      abi: NonFlexiblePot
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Approval
        - AssetAdded
        - AssetRemoved
        - Canceled
        - Closed
        - Claimed
        - Deposited
        - Executed
        - FundraisingClosed
        - PotInitialized
        - Transfer
        - Withdrawn
      abis:
        - name: NonFlexiblePot
          file: ./abis/NonFlexiblePot.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: AssetAdded(indexed address,address)
          handler: handleAssetAdded
        - event: AssetRemoved(address,address)
          handler: handleAssetRemoved
        - event: Canceled(indexed address,uint256,uint256)
          handler: handleCanceled
        - event: Closed(indexed address)
          handler: handleClosed
        - event: Claimed(indexed address,indexed address,uint256,address,uint256)
          handler: handleClaimed
        - event: Deposited(indexed address,indexed address,address,uint256,uint256)
          handler: handleDeposited
        - event: Executed(indexed address,address,uint16)
          handler: handleExecuted
          receipt: true
        - event: FundraisingClosed(indexed address,uint256,uint256,uint256)
          handler: handleFundraisingClosed
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Withdrawn(indexed address,uint256,indexed
            address,uint256,(address,uint256)[],uint256,uint256,uint256)
          handler: handleWithdrawn
        - event: PlatformFeeCollected(indexed address,address,uint256)
          handler: handlePlatformFeeCollected
      file: ./src/non-flexible-pot.ts
  - kind: ethereum
    name: IPlatformGuard
    network: {{network}}
    source:
      abi: IPlatformGuard
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AddLiquidity
        - RemoveLiquidity
        - ExchangeFrom
        - ExchangeTo
      abis:
        - name: IPlatformGuard
          file: ./abis/IPlatformGuard.json
      eventHandlers:
        - event: ExchangeFrom(address,address,address,uint256,address)
          handler: handleExchangeFrom
        - event: ExchangeTo(address,address,address,address,uint256)
          handler: handleExchangeTo
        - event: AddLiquidity(address,address,address,bytes)
          handler: handleAddLiquidity
        - event: RemoveLiquidity(address,address,address,bytes)
          handler: handleRemoveLiquidity
        - event: UnwrapWBERA(address,address,uint256)
          handler: handleUnwrapWBERA
      file: ./src/iplatform-guard.ts
  - kind: ethereum
    name: IAssetGuard
    network: {{network}}
    source:
      abi: IAssetGuard
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ERC20Approval
        - WrapNativeToken
        - UnwrapNativeToken
      abis:
        - name: IAssetGuard
          file: ./abis/IAssetGuard.json
      eventHandlers:
        - event: ERC20Approval(address,address,address,uint256)
          handler: handleERC20Approval
        - event: WrapNativeToken(address,address,uint256)
          handler: handleWrapNativeToken
        - event: UnwrapNativeToken(address,address,uint256)
          handler: handleUnwrapNativeToken
      file: ./src/iasset-guard.ts